<!DOCTYPE html>
<html lang="{{ page.lang | default: 'ja' }}">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ page.title }}</title>
  <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const select = document.getElementById("lang-select");
      if (select) {
        select.addEventListener("change", function() {
          window.location.href = this.value;
        });
      }
    });
  </script>

  <script>
    const btn = document.getElementById('hamburger-btn');
    const nav = document.getElementById('nav-links');
    const overlay = document.getElementById('overlay');
    const iconMenu = btn.querySelector('.icon-menu');
    const iconClose = btn.querySelector('.icon-close');

    function toggleMenu() {
      const isOpen = nav.classList.toggle('open');
      overlay.classList.toggle('show', isOpen);
      iconMenu.style.display = isOpen ? 'none' : 'block';
      iconClose.style.display = isOpen ? 'block' : 'none';
    }

    btn.addEventListener('click', toggleMenu);

    overlay.addEventListener('click', () => {
      nav.classList.remove('open');
      overlay.classList.remove('show');
      iconMenu.style.display = 'block';
      iconClose.style.display = 'none';
    });

    // 初期表示
    iconClose.style.display = 'none';
  </script>

</head>
<body>
  <!-- 固定ナビゲーション -->
  <header class="site-header">
    <nav class="nav-bar">
      <!-- ハンバーガーボタン -->
      <button class="hamburger" id="hamburger-btn" aria-label="Menu">
        <!-- SVGアイコン -->
        <svg class="icon-menu" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16" />
        </svg>
        <svg class="icon-close" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>

      <!-- メニュー本体 -->
      <div class="nav-links" id="nav-links">
        <a href="{% if page.lang == 'ja' %}/{% elsif page.lang == 'en' %}/en/{% else %}/zh/{% endif %}">HOME</a>
        <a href="{% if page.lang == 'ja' %}/about/{% elsif page.lang == 'en' %}/en/about/{% else %}/zh/about/{% endif %}">ABOUT US</a>
        <a href="{% if page.lang == 'ja' %}/support/{% elsif page.lang == 'en' %}/en/support/{% else %}/zh/support/{% endif %}">SUPPORT & DONATE</a>
        <a href="{% if page.lang == 'ja' %}/shop/{% elsif page.lang == 'en' %}/en/shop/{% else %}/zh/shop/{% endif %}">SHOP MERCH</a>
        <a href="{% if page.lang == 'ja' %}/contact/{% elsif page.lang == 'en' %}/en/contact/{% else %}/zh/contact/{% endif %}">CONTACT US</a>
      </div>

      <!-- 言語切替 -->
      <div class="lang-selector">
        <select id="lang-select">
          <option value="/" {% if page.lang == "ja" %}selected{% endif %}>日本語</option>
          <option value="/en/" {% if page.lang == "en" %}selected{% endif %}>English</option>
          <option value="/zh/" {% if page.lang == "zh" %}selected{% endif %}>中文</option>
        </select>
      </div>
    </nav>
  </header>
  <!-- オーバーレイ -->
  <div class="overlay" id="overlay"></div>

  <main>
    {{ content }}
  </main>
</body>
</html>
